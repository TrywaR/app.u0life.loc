function dashboard_init(){dateCurrent=new Date,iDay=iDayCurrent=dateCurrent.getDate(),iMonth=iMonthCurrent=dateCurrent.getMonth(),iYear=iYearCurrent=dateCurrent.getFullYear(),iMonth+=1,date_switch(iDay,iMonth,iYear)}function date_switch(a,t,e){liveliner_day("get_day",a,t,e)}function date_update(a,t,e){if(a)iDay=a,$(document).find("#dashboard_day").length&&$(document).find("#dashboard_day").val(a);else{a=$(document).find("#dashboard_day").val()?$(document).find("#dashboard_day").val():1;iDay=a,$(document).find("#dashboard_day").val(a)}t?(iMonth=t,$(document).find("#dashboard_month").length&&$(document).find("#dashboard_month").val(t)):$(document).find("#dashboard_month").length?iMonth=$(document).find("#dashboard_month").val():iMonth=dateCurrent.getMonth(),e?(iMonth=t,$(document).find("#dashboard_month").length&&$(document).find("#dashboard_month").val(t)):$(document).find("#dashboard_year").length?iYear=$(document).find("#dashboard_year").val():iYear=dateCurrent.getFullYear()}function liveliner_day(a,t,e,d){$(document).find("#dashboard_days").addClass("_loading_"),$.when(content_download({action:"dashboards",form:a,day:t,month:e,year:d},"json",!1)).then(function(i){var s="",n=24,o=0,r=0;1==t&&"prev_day"==a&&(date_update(i.day,i.month,i.year),dashboard_month(i.month,i.year),subscriptions_month(i.month,i.year)),t=i.day,e=i.month,d=i.year,s+='<div class="_liveliner_day">',s+='<div class="_line_hours"><div class="_val">'+i.times_sum+'</div><div class="_seporator">/</div><div class="_def">24</div></div>',i.moneys_sum&&(s+='<div class="_line_moneys"><div class="_val">'+i.moneys_sum+"</div></div>"),s+='<div class="block_date _date">',s+='<select name="day" class="_day form-select btn" id="dashboard_day">';for(var l=new Date(i.year,i.month,0).getDate(),c=1;c<=l;c++)i.day==c?s+='<option selected="selected" value="'+c+'">'+c+"</option>":s+='<option value="'+c+'">'+c+"</option>";s+="</select>",s+='<button class="_button btn" id="liveliner_reload_day" data-day="'+i.day+'" data-month="'+i.month+'" data-year="'+i.year+'" style="display:none;">',s+='<i class="fa-solid fa-rotate-right"></i>',s+="</button>",s+='<button class="_button btn" id="liveliner_prev_day" data-day="'+i.day+'" data-month="'+i.month+'" data-year="'+i.year+'">',s+='<i class="fa-solid fa-arrow-right-long"></i>',s+="</button>",s+="</div>",s+='<div class="_vals">',$.each(i.categories,function(a,t){t.moneys&&t.moneys.sum&&(r=Math.abs(t.moneys.sum)>r?Math.abs(t.moneys.sum):r)}),$.each(i.categories,function(a,i){var l=i.moneys&&0!=parseInt(i.moneys.sum)?i.moneys.sum:0,c=i.times&&0!=parseInt(i.times.sum)?i.times.sum:0;if(l||c){var _=0,m=0;c?(arrCategoryTimesSum=c.split(":"),iCategoryTimesSum=arrCategoryTimesSum[0],arrCategoryTimesSum=arrCategoryTimesSum[0]+":"+arrCategoryTimesSum[1],_=iCategoryTimesSum/24*100):(iCategoryTimesSum=2,_=iCategoryTimesSum/24*100),m=r?Math.abs(l/r*100):0,n-=iCategoryTimesSum,o+=iCategoryTimesSum,s+='<div class="_category" style="height:'+_+'%">',s+='<div class="_content">',s+='<div class="_title">'+i.title+"</div> ",0!=l&&(s+='<div class="_moneys">'+Math.round(l)+"</div>"),c&&(s+='<div class="_times">'+c+"</div>"),s+='<div class="_background_moneys" style="width:'+m+"%; background:"+i.color+';"></div>',s+='<div class="_background_times" style="background: '+i.color+'"></div>',s+="</div>",s+='<div class="_buttons">',s+='<a href="javascript:;" class="_button content_loader_show" data-action="times" data-animate_class="animate__flipInY" data-elem=".time" data-form="form" data-full="true" data-category_id="'+a+'" data-date="'+d+"-"+e+"-"+t+'" data-filter="true" data-success_click="#liveliner_reload_day">',s+='<span class="_icon"><i class="fa-solid fa-clock"></i></span>',s+="</a>",s+='<a href="javascript:;" class="_button content_loader_show" data-action="moneys" data-animate_class="animate__flipInY" data-elem=".time" data-form="form" data-full="true" data-category_id="'+a+'" data-date="'+d+"-"+e+"-"+t+'" data-filter="true" data-success_click="#liveliner_reload_day">',s+='<span class="_icon"><i class="fa-solid fa-wallet"></i></span>',s+="</a>",s+="</div>",s+="</div>"}}),s+='<div class="_category" style="min-height:'+n/24*100+'%">',s+='<div class="_content">',s+='<div class="_title">No</div> ',s+='<div class="_background_moneys" style="width: 2%; background: white;"></div>',s+='<div class="_background_times" style="background: white"></div>',s+="</div>",s+="</div>",s+="</div>",s+='<div class="_buttons">',s+='<div class="_group">',s+='<div class="_icon">',s+='<i class="fa-solid fa-clock"></i>',s+="</div>",s+='<a href="javascript:;" class="btn btn-lg __main content_loader_show" data-action="times" data-animate_class="animate__flipInY" data-elem=".time" data-form="form" data-full="true" data-date="'+d+"-"+e+"-"+t+'" data-filter="true" data-success_click="#liveliner_reload_day">',s+='<i class="fa-solid fa-plus"></i>',s+="</a>",s+='<a href="/times/?date='+d+"-"+e+"-"+t+'" class="btn btn-lg">',s+='<i class="fa-solid fa-bars"></i>',s+="</a>",s+="</div>",s+='<div class="_group">',s+='<div class="_icon">',s+='<i class="fa-solid fa-wallet"></i>',s+="</div>",s+='<a href="javascript:;" class="btn btn-lg __main content_loader_show" data-action="moneys" data-animate_class="animate__flipInY" data-elem=".time" data-form="form" data-full="true" data-date="'+d+"-"+e+"-"+t+'" data-filter="true" data-success_click="#liveliner_reload_day">',s+='<i class="fa-solid fa-plus"></i>',s+="</a>",s+='<a href="/moneys/?date='+d+"-"+e+"-"+t+'" class="btn btn-lg">',s+='<i class="fa-solid fa-bars"></i>',s+="</a>",s+="</div>",s+="</div>",s+="</div>",$(document).find("#dashboard_days").html(s),$(document).find("#dashboard_day").select2({selectionCssClass:":all:"}),$(document).find("#dashboard_days").removeClass("_loading_")})}dateCurrent=new Date,iDay=iDayCurrent=dateCurrent.getDate(),iMonth=iMonthCurrent=dateCurrent.getMonth(),iYear=iYearCurrent=dateCurrent.getFullYear(),iMonth+=1,$(document).on("change","#dashboard_day",function(){date_update(),date_switch(iDay,iMonth,iYear)}),$(document).on("change","#dashboard_month",function(){date_update(),date_switch(iDay,iMonth,iYear)}),$(document).on("change","#dashboard_year",function(){date_update(),date_switch(iDay,iMonth,iYear)}),$(document).on("click","#liveliner_prev_day",function(){liveliner_day("prev_day",$(this).data().day,$(this).data().month,$(this).data().year)}),$(document).on("click","#liveliner_reload_day",function(){liveliner_day("get_day",$(this).data().day,$(this).data().month,$(this).data().year)});